<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MKS TCG – Rules</title>

    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" defer></script>
    <script src="rules.js?v=2" defer></script>
</head>
<body class="rules-page">
    <header class="topbar">
        <nav class="nav">
            <a class="brand" href="index.html">MKS TCG</a>
            <a class="nav-link" href="catalogue.html">Catalogue</a>
            <a class="nav-link active" href="rules.html">Rules</a>
            <a class="nav-link" href="about.html">About</a>
        </nav>
    </header>

    <main class="rules-main">
        <!-- HERO -->
        <section class="rules-hero">
            <h1>How to Play</h1>
            <p>Race for <strong>Position</strong>, not life total. Build a deck, dodge like a maniac, and cross the line first.</p>
            <div class="rules-hero-actions">
                <a class="btn btn-lg" href="catalogue.html">Open Card Catalogue</a>
                <button id="shuffleExamples" class="btn btn-ghost btn-lg" type="button">Shuffle Example Cards</button>
            </div>

            <!-- chip nav -->
            <div class="rules-nav-chips">
                <a href="#objective">Objective</a>
                <a href="#setup">Setup</a>
                <a href="#turn">Turn</a>
                <a href="#card-types">Card Types</a>
                <a href="#position">Position</a>
                <a href="#hits">Hits & Dodges</a>
                <a href="#faq">FAQ</a>
                <a href="#tools">Play Tools</a>
            </div>
        </section>

        <!-- OBJECTIVE -->
        <section id="objective" class="rules-section">
            <h2>Objective</h2>
            <p>
                The winner is the player with the highest <strong>Position</strong> when the race ends.
                Position is your place in the race. Cards move you forward or shove others back.
            </p>
            <ul>
                <li>Everyone starts at Position <strong>0</strong>.</li>
                <li>Card effects will say things like “Gain 8 Position” or “Target loses 6 Position”.</li>
                <li>At the end of the final turn, whoever is furthest ahead wins.</li>
            </ul>
        </section>

        <!-- SETUP -->
        <section id="setup" class="rules-section">
            <h2>Setup</h2>
            <ol>
                <li>Each player chooses <strong>1 Driver</strong> and <strong>1 Kart</strong>.</li>
                <li>Build a deck of <strong>12–15</strong> cards (Items and Utilities).</li>
                <li>Shuffle your deck and draw <strong>5</strong> cards.</li>
                <li>Everyone starts at Position <strong>0</strong>.</li>
            </ol>

            <div class="rules-row">
                <div class="rules-col">
                    <h3>Drivers</h3>
                    <p>Drivers are your character card. They usually give a unique ability or once-per-turn trick.</p>
                    <ul>
                        <li>Only one Driver per player.</li>
                        <li>Some Drivers generate fuel, copy abilities, or bend dodge rules.</li>
                    </ul>
                </div>
                <div class="rules-col rules-example">
                    <h4>Example Driver</h4>
                    <div id="driverExample" class="example-card-slot"></div>
                </div>
            </div>

            <div class="rules-row">
                <div class="rules-col">
                    <h3>Karts</h3>
                    <p>Karts define how your racer handles.</p>
                    <ul>
                        <li><strong>Speed</strong> – how fast you can move up the track.</li>
                        <li><strong>Handling</strong> – how good you are at dodging attacks.</li>
                        <li>Many Karts have a passive bonus (“When you dodge…”, “When you play a Utility…” etc.).</li>
                    </ul>
                </div>
                <div class="rules-col rules-example">
                    <h4>Example Kart</h4>
                    <div id="kartExample" class="example-card-slot"></div>
                </div>
            </div>
        </section>

        <!-- TURN -->
        <section id="turn" class="rules-section">
            <h2>Turn Structure</h2>
            <ol class="rules-steps">
                <li><strong>Start:</strong> Resolve any “at the start of your turn” effects.</li>
                <li><strong>Draw:</strong> Draw 1 card.</li>
                <li><strong>Main:</strong> Play Items and Utilities, equip things, activate abilities.</li>
                <li><strong>Race:</strong> Apply Position changes for this turn.</li>
                <li><strong>End:</strong> Resolve “end of turn” effects, discard if a card tells you to.</li>
            </ol>
            <p class="rules-note">
                First player is chosen randomly. If you want to be fancy, player with the lowest total Speed + Handling picks who goes first.
            </p>
        </section>

        <!-- CARD TYPES -->
        <section id="card-types" class="rules-section">
            <h2>Card Types</h2>

            <div class="rules-row">
                <div class="rules-col">
                    <h3>Items</h3>
                    <p>Items are the chaos. Shells, bombs, dodgy mushrooms… all the good stuff.</p>
                    <ul>
                        <li>Usually have an <strong>Offensive</strong> and a <strong>Defensive</strong> mode.</li>
                        <li>Offensive: you target another driver and roll to see if you hit.</li>
                        <li>Defensive: you boost your dodge or blunt an incoming attack.</li>
                    </ul>
                </div>
                <div class="rules-col rules-example">
                    <h4>Example Item</h4>
                    <div id="itemExample" class="example-card-slot"></div>
                </div>
            </div>

            <div class="rules-row">
                <div class="rules-col">
                    <h3>Utilities</h3>
                    <p>Utilities are one-shot tactical plays. They don’t usually require hit rolls.</p>
                    <ul>
                        <li>Draw extra cards, recycle your discard, or spike someone’s Position.</li>
                        <li>Often say things like “For the rest of this turn…” or “This round…”.</li>
                    </ul>
                </div>
                <div class="rules-col rules-example">
                    <h4>Example Utility</h4>
                    <div id="utilityExample" class="example-card-slot"></div>
                </div>
            </div>
        </section>

        <!-- POSITION -->
        <section id="position" class="rules-section">
            <h2>Position & Movement</h2>
            <p>
                Most effects either gain you Position or make someone else lose it.
            </p>
            <ul>
                <li>If a card says “gain 10 Position”, move yourself forward 10.</li>
                <li>If it says “target loses 6 Position”, they move backwards 6.</li>
                <li>Some effects care whether a driver is <strong>ahead</strong> or <strong>behind</strong> you.</li>
            </ul>
            <p class="rules-note">
                If an effect would take someone below 0, they just stay at 0. No negative track.
            </p>
        </section>

        <!-- HITS & DODGES -->
        <section id="hits" class="rules-section">
            <h2>Hits, Dodges & Handling</h2>
            <ul>
                <li>Most Offensive Item abilities have a <strong>Hit</strong> value (like “Hit 7+”).</li>
                <li>Roll the die: if your roll + any bonuses meets or beats the Hit, the attack lands.</li>
                <li>Defending: you usually roll to dodge. Your <strong>Handling</strong> adds to dodge rolls.</li>
                <li>Some cards add flat bonuses to hit/dodge, or say “unblockable” (no dodging).</li>
            </ul>
            <p class="rules-note">
                If an attack’s target becomes illegal before it resolves (for example they’re no longer in range),
                it fizzles and does nothing.
            </p>
        </section>

        <!-- FAQ -->
        <section id="faq" class="rules-section">
            <h2>FAQ (Quick Rulings)</h2>
            <details>
                <summary>Can I play more than one card in a turn?</summary>
                <p>Yes, as long as you can pay all costs and nothing on the table says you can’t.</p>
            </details>
            <details>
                <summary>What if two things trigger at the same time?</summary>
                <p>The current player chooses the order their effects go on the stack. Then the next player, and so on.</p>
            </details>
            <details>
                <summary>What if a card doesn’t say when it ends?</summary>
                <p>Unless it clearly says “this round” or “this turn”, treat it as a one-off effect that resolves and is done.</p>
            </details>
        </section>

        <!-- TOOLS -->
        <section id="tools" class="rules-section">
            <h2>Play Tools</h2>
            <p>Don’t have dice on you? Use these.</p>
            <div class="rules-tools">
                <button id="rollD6" type="button" class="btn">Roll d6</button>
                <span id="d6Result" class="tool-badge">–</span>
                <button id="flipCoin" type="button" class="btn">Flip Coin</button>
                <span id="coinResult" class="tool-badge">–</span>
            </div>
        </section>
    </main>

    <footer class="footer">
        <span>© MKS • Rules page uses <code>data/MasterSheet.csv</code> and <code>images/cards/&lt;CardID&gt;_vv1.png</code></span>
    </footer>
</body>
</html>
